(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[412],{90672:function(H,W,e){"use strict";var h=e(22122),C=e(81253),u=e(67294),s=e(55778),I=["fieldProps","proFieldProps"],B=function(A,F){var L=A.fieldProps,D=A.proFieldProps,j=(0,C.Z)(A,I);return u.createElement(s.Z,(0,h.Z)({ref:F,mode:"edit",valueType:"textarea",fieldProps:L,proFieldProps:D},j))};W.Z=u.forwardRef(B)},15196:function(H,W,e){"use strict";e.d(W,{ZP:function(){return x}});var h=e(9715),C=e(93766),u=e(22122),s=e(67294),I=e(49111),B=e(19650),w=e(96156),A=e(84305),F=e(39559),L=e(28481),D=e(28991),j=e(8812),K=e(66758),z=e(63891),U=e(56725),_=e(53621),a=e(94184),t=e.n(a),o=s.forwardRef(function(O,$){var y=s.useContext(K.Z),b=y.groupProps,n=(0,D.Z)((0,D.Z)({},b),O),d=n.children,T=n.collapsible,E=n.defaultCollapsed,p=n.style,P=n.labelLayout,m=n.title,Z=m===void 0?O.label:m,R=n.tooltip,S=n.align,q=S===void 0?"start":S,g=n.direction,ee=n.size,ie=ee===void 0?32:ee,le=n.titleStyle,te=n.titleRender,V=n.spaceProps,N=n.extra,re=n.autoFocus,ue=(0,U.Z)(function(){return E||!1},{value:O.collapsed,onChange:O.onCollapse}),ne=(0,L.Z)(ue,2),Q=ne[0],ce=ne[1],de=(0,s.useContext)(F.ZP.ConfigContext),_e=de.getPrefixCls,G=_e("pro-form-group"),ae=T&&s.createElement(j.Z,{style:{marginRight:8},rotate:Q?void 0:90}),oe=s.createElement(_.Z,{label:ae?s.createElement("div",null,ae,Z):Z,tooltip:R}),se=te?te(oe,O):oe,J=[],pe=s.Children.toArray(d).map(function(M,X){var k;return s.isValidElement(M)&&(M==null||(k=M.props)===null||k===void 0?void 0:k.hidden)?(J.push(M),null):X===0&&s.isValidElement(M)&&re?s.cloneElement(M,(0,D.Z)((0,D.Z)({},M.props),{},{autoFocus:re})):M});return s.createElement("div",{className:t()(G,(0,w.Z)({},"".concat(G,"-twoLine"),P==="twoLine")),style:p,ref:$},J.length>0&&s.createElement("div",{style:{display:"none"}},J),(Z||R||N)&&s.createElement("div",{className:"".concat(G,"-title"),style:le,onClick:function(){ce(!Q)}},N?s.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},se,s.createElement("span",{onClick:function(X){return X.stopPropagation()}},N)):se),T&&Q?null:s.createElement(B.Z,(0,u.Z)({},V,{className:"".concat(G,"-container"),size:ie,align:q,direction:g,style:(0,D.Z)({rowGap:0},V==null?void 0:V.style)}),pe))});o.displayName="ProForm-Group";var i=o,l=e(52241),r=e(27738);function f(O){return s.createElement(l.Z,(0,u.Z)({layout:"vertical",submitter:{render:function(y,b){return b.reverse()}},contentRender:function(y,b){return s.createElement(s.Fragment,null,y,b)}},O))}f.Group=i,f.useForm=C.Z.useForm,f.Item=r.Z;var v=f,c=e(69989),Y=v.Group,x=v},32185:function(H,W,e){"use strict";e.r(W),e.d(W,{default:function(){return x}});var h=e(34792),C=e(48086),u=e(3182),s=e(69610),I=e(54941),B=e(81306),w=e(72936),A=e(402),F=e(72031),L=e(94043),D=e.n(L),j=e(67294),K=e(15196),z=e(5966),U=e(90672),_=e(5234),a=e.n(_),t=e(72757),o=e.n(t),i=e(11021),l=e(57895),r=e(65278),f=e(85224),v=e(21010),c=e(85893),Y=F.Z.Title,x=function(O){(0,B.Z)(y,O);var $=(0,w.Z)(y);function y(b){var n;return(0,s.Z)(this,y),n=$.call(this,b),n.state={id:n.props.location.query.id,courseDetail:{},isDisabled:n.props.location.query.id},n.getExercise=(0,u.Z)(D().mark(function d(){var T,E,p;return D().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return T=n.state.id,E=n.props.location.query.topic_title,m.next=4,(0,i.Sp)(E,T);case 4:p=m.sent,p.error_code==200?n.setState({courseDetail:p.data}):C.default.error(p.msg);case 6:case"end":return m.stop()}},d)})),n.save=function(){var d=(0,u.Z)(D().mark(function T(E){var p,P,m,Z,R,S;return D().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=n.state.courseDetail,p.title){g.next=5;break}C.default.warning("please input the course title"),g.next=20;break;case 5:if(p.content){g.next=9;break}C.default.warning("please input the course content"),g.next=20;break;case 9:if(P=n.props.location.query,m=P.topic_title,Z=P.id,!Z){g.next=16;break}return g.next=13,(0,i.tu)(Z,m,E.title,p.content,E.answer,E.hint);case 13:R=g.sent,g.next=19;break;case 16:return g.next=18,(0,i.xH)(m,p.title,p.content,p.answer,p.hint);case 18:R=g.sent;case 19:R.error_code==200?(C.default.success("Save success"),S=R.data.id,n.props.history.push("/courseAdmin/courseDisplay?topic_title=".concat(m,"&id=").concat(S))):C.default.error("Save error! "+R.msg);case 20:case"end":return g.stop()}},T)}));return function(T){return d.apply(this,arguments)}}(),n}return(0,I.Z)(y,[{key:"componentDidMount",value:function(){this.props.location.query.id&&this.getExercise()}},{key:"render",value:function(){var n=this,d=this.state.courseDetail,T=this.props.location.query.topic_title;return(0,c.jsx)(r.ZP,{ghost:!0,onBack:function(){return n.props.history.go(-1)},header:{title:(0,c.jsx)(Y,{level:2,children:d.id?(0,c.jsx)(v._H,{id:"pages.courseManager.editCourse"}):(0,c.jsx)(v._H,{id:"pages.courseManager.addCourse"})})},children:(0,c.jsx)(l.ZP,{children:(0,c.jsxs)(K.ZP,{submitter:{render:function(p,P){return(0,c.jsx)(f.Z,{children:P})},searchConfig:{submitText:(0,c.jsx)(v._H,{id:"pages.common.submit"})},resetButtonProps:{style:{display:"none"}}},onFinish:this.save,children:[(0,c.jsx)(z.Z,{width:"md",name:"title",label:(0,c.jsx)(v._H,{id:"pages.common.courseTitle"}),placeholder:(0,v.Kd)()=="zh-CN"?"\u8BF7\u8F93\u5165\u8BE5\u8BFE\u7A0B\u7684\u6807\u9898":"please input a course title",value:d==null?void 0:d.title,onChange:function(p){d.title=p.target.value,n.setState({courseDetail:d})}}),(0,c.jsx)(K.ZP.Item,{name:"content",label:(0,c.jsx)(v._H,{id:"pages.courseManager.courseContent"}),value:d==null?void 0:d.content,children:(0,c.jsx)(t.CKEditor,{editor:a(),data:d.content,config:{toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","insertTable","mediaEmbed","undo","redo"],shouldNotGroupWhenFull:!1},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},ckfinder:{uploadUrl:"/server/V1/course/upload_course_img/".concat(T,"/")}},onChange:function(p,P){var m=n.state.courseDetail,Z=P.getData();m.content=Z,n.setState({courseDetail:m})},onError:function(p){var P=p.willEditorRestart;P&&n.editor.ui.view.toolbar.element.remove()}})}),(0,c.jsx)(U.Z,{name:"answer",label:(0,c.jsx)(v._H,{id:"pages.common.answer"}),value:d==null?void 0:d.answer,placeholder:(0,v.Kd)()=="zh-CN"?"\u8BF7\u8F93\u5165\u8BE5\u4EE3\u7801\u7EC3\u4E60\u7684\u7B54\u6848":"Please input the answer for the code",onChange:function(p){d.answer=p.target.value,n.setState({courseDetail:d})}}),(0,c.jsx)(U.Z,{name:"hint",label:(0,c.jsx)(v._H,{id:"pages.common.hint"}),value:d==null?void 0:d.hint,placeholder:(0,v.Kd)()=="zh-CN"?"\u8BF7\u8F93\u5165\u8BE5\u4EE3\u7801\u7EC3\u4E60\u7684\u63D0\u793A\u4FE1\u606F":"Please input the hint for the code exercise",onChange:function(p){d.hint=p.target.value,n.setState({courseDetail:d})}})]})})})}}]),y}(j.Component)},11021:function(H,W,e){"use strict";e.d(W,{D0:function(){return I},wA:function(){return B},tu:function(){return w},rq:function(){return A},xH:function(){return F},G$:function(){return L},Sp:function(){return D},A:function(){return j},BK:function(){return K},BW:function(){return z},EI:function(){return U}});var h=e(3182),C=e(94043),u=e.n(C),s=e(21010),I=function(){var _=(0,h.Z)(u().mark(function a(t){var o;return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o="/server/V1/course/topicsByTeacher/?teacher_id=".concat(t),l.abrupt("return",(0,s.WY)(o));case 2:case"end":return l.stop()}},a)}));return function(t){return _.apply(this,arguments)}}(),B=function(){var _=(0,h.Z)(u().mark(function a(t,o){var i;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="/server/V1/course/edit/",r.abrupt("return",(0,s.WY)(i,{method:"post",data:{request_entity:"Topic",content:{topic_id:t,topic_info:o}}}));case 2:case"end":return r.stop()}},a)}));return function(t,o){return _.apply(this,arguments)}}(),w=function(){var _=(0,h.Z)(u().mark(function a(t,o,i,l,r,f,v){var c;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return c="/server/V1/course/edit/",x.abrupt("return",(0,s.WY)(c,{method:"post",data:{request_entity:"Course",content:{id:t,related_topic:o,title:i,content:l,answer:r,hint:f,teacher_id:v}}}));case 2:case"end":return x.stop()}},a)}));return function(t,o,i,l,r,f,v){return _.apply(this,arguments)}}(),A=function(){var _=(0,h.Z)(u().mark(function a(t,o,i,l,r){var f;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return f="/server/V1/course/create/",c.abrupt("return",(0,s.WY)(f,{method:"post",data:{request_entity:"Topic",content:{topic_title:t,topic_content:o,topic_description:i,topic_img:l,teacher_id:r}}}));case 2:case"end":return c.stop()}},a)}));return function(t,o,i,l,r){return _.apply(this,arguments)}}(),F=function(){var _=(0,h.Z)(u().mark(function a(t,o,i,l,r){var f;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return f="/server/V1/course/create/",c.abrupt("return",(0,s.WY)(f,{method:"post",data:{request_entity:"Course",content:{related_topic:t,title:o,content:i,answer:l,hint:r}}}));case 2:case"end":return c.stop()}},a)}));return function(t,o,i,l,r){return _.apply(this,arguments)}}(),L=function(){var _=(0,h.Z)(u().mark(function a(t){var o;return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o="/server/V1/course/courses/".concat(t,"/"),l.abrupt("return",(0,s.WY)(o));case 2:case"end":return l.stop()}},a)}));return function(t){return _.apply(this,arguments)}}(),D=function(){var _=(0,h.Z)(u().mark(function a(t,o){var i;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="/server/V1/course/courseDetail/".concat(t,"/").concat(o,"/"),r.abrupt("return",(0,s.WY)(i));case 2:case"end":return r.stop()}},a)}));return function(t,o){return _.apply(this,arguments)}}(),j=function(){var _=(0,h.Z)(u().mark(function a(t,o){var i;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="/server/V1/course/delete/",r.abrupt("return",(0,s.WY)(i,{method:"post",data:{request_entity:"Course",related_topic:t,content:o}}));case 2:case"end":return r.stop()}},a)}));return function(t,o){return _.apply(this,arguments)}}(),K=function(){var _=(0,h.Z)(u().mark(function a(t){var o;return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o="/server/V1/course/delete/",l.abrupt("return",(0,s.WY)(o,{method:"post",data:{request_entity:"Topic",content:t}}));case 2:case"end":return l.stop()}},a)}));return function(t){return _.apply(this,arguments)}}(),z=function(){var _=(0,h.Z)(u().mark(function a(t,o){var i;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="/server/V1/course/sort/",r.abrupt("return",(0,s.WY)(i,{method:"post",data:{request_entity:"Course",related_topic:t,content:o}}));case 2:case"end":return r.stop()}},a)}));return function(t,o){return _.apply(this,arguments)}}(),U=function(){var _=(0,h.Z)(u().mark(function a(t,o){var i;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="/server/V1/course/delete_img/",r.abrupt("return",(0,s.WY)(i,{method:"post",data:{request_entity:o,fname:t}}));case 2:case"end":return r.stop()}},a)}));return function(t,o){return _.apply(this,arguments)}}()},63891:function(){},69989:function(){}}]);
