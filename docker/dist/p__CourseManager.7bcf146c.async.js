(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[412],{5966:function(H,O,e){"use strict";var _=e(22122),D=e(81253),s=e(67294),r=e(46906),w=["fieldProps","proFieldProps"],U=["fieldProps","proFieldProps"],Z="text",S=function(g){var b=g.fieldProps,B=g.proFieldProps,R=(0,D.Z)(g,w);return s.createElement(r.Z,(0,_.Z)({mode:"edit",valueType:Z,fieldProps:b,filedConfig:{valueType:Z},proFieldProps:B},R))},x=function(g){var b=g.fieldProps,B=g.proFieldProps,R=(0,D.Z)(g,U);return s.createElement(r.Z,(0,_.Z)({mode:"edit",valueType:"password",fieldProps:b,proFieldProps:B,filedConfig:{valueType:Z}},R))},W=S;W.Password=x,W.displayName="ProFormComponent",O.Z=W},952:function(H,O,e){"use strict";var _=e(56640),D=e.n(_),s=e(5894);O.ZP=s.A},5894:function(H,O,e){"use strict";e.d(O,{A:function(){return v}});var _=e(9715),D=e(92080),s=e(22122),r=e(67294),w=e(96156),U=e(49111),Z=e(19650),S=e(84305),x=e(75901),W=e(28481),P=e(28991),g=e(8812),b=e(66758),B=e(96138),R=e(56725),u=e(53621),n=e(94184),o=e.n(n),t=e(2514),l=r.forwardRef(function(h,z){var j=r.useContext(b.Z),T=j.groupProps,c=(0,P.Z)((0,P.Z)({},T),h),d=c.children,C=c.collapsible,F=c.defaultCollapsed,y=c.style,p=c.labelLayout,M=c.title,m=M===void 0?h.label:M,L=c.tooltip,$=c.align,I=$===void 0?"start":$,V=c.direction,Q=c.size,f=Q===void 0?32:Q,ue=c.titleStyle,ee=c.titleRender,G=c.spaceProps,J=c.extra,X=c.autoFocus,de=(0,R.Z)(function(){return F||!1},{value:h.collapsed,onChange:h.onCollapse}),re=(0,W.Z)(de,2),k=re[0],ce=re[1],_e=(0,r.useContext)(x.ZP.ConfigContext),pe=_e.getPrefixCls,te=(0,t.z)(h),ve=te.ColWrapper,ne=te.RowWrapper,Y=pe("pro-form-group"),ae=C&&r.createElement(g.Z,{style:{marginRight:8},rotate:k?void 0:90}),oe=r.createElement(u.Z,{label:ae?r.createElement("div",null,ae,m):m,tooltip:L}),se=(0,r.useCallback)(function(K){var N=K.children;return r.createElement(Z.Z,(0,s.Z)({},G,{className:"".concat(Y,"-container"),size:f,align:I,direction:V,style:(0,P.Z)({rowGap:0},G==null?void 0:G.style)}),N)},[I,Y,V,f,G]),ie=ee?ee(oe,h):oe,me=(0,r.useMemo)(function(){var K=[],N=r.Children.toArray(d).map(function(A,he){var q;return r.isValidElement(A)&&(A==null||(q=A.props)===null||q===void 0?void 0:q.hidden)?(K.push(A),null):he===0&&r.isValidElement(A)&&X?r.cloneElement(A,(0,P.Z)((0,P.Z)({},A.props),{},{autoFocus:X})):A});return[r.createElement(ne,{key:"children",Wrapper:se},N),K.length>0?r.createElement("div",{style:{display:"none"}},K):null]},[d,ne,se,X]),le=(0,W.Z)(me,2),fe=le[0],Ee=le[1];return r.createElement(ve,null,r.createElement("div",{className:o()(Y,(0,w.Z)({},"".concat(Y,"-twoLine"),p==="twoLine")),style:y,ref:z},Ee,(m||L||J)&&r.createElement("div",{className:"".concat(Y,"-title"),style:ue,onClick:function(){ce(!k)}},J?r.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},ie,r.createElement("span",{onClick:function(N){return N.stopPropagation()}},J)):ie),C&&k?null:fe))});l.displayName="ProForm-Group";var i=l,a=e(82785),E=e(88374);function v(h){return r.createElement(E.I,(0,s.Z)({layout:"vertical",submitter:{render:function(j,T){return T.reverse()}},contentRender:function(j,T){return r.createElement(r.Fragment,null,j,T)}},h))}v.Group=i,v.useForm=D.Z.useForm,v.Item=a.Z},96138:function(){},56640:function(){},32185:function(H,O,e){"use strict";e.r(O),e.d(O,{default:function(){return h}});var _=e(34792),D=e(48086),s=e(3182),r=e(69610),w=e(54941),U=e(81306),Z=e(72936),S=e(402),x=e(97272),W=e(94043),P=e.n(W),g=e(67294),b=e(952),B=e(5966),R=e(5234),u=e.n(R),n=e(72757),o=e.n(n),t=e(11021),l=e(57895),i=e(78009),a=e(85224),E=e(85893),v=x.Z.Title,h=function(z){(0,U.Z)(T,z);var j=(0,Z.Z)(T);function T(c){var d;return(0,r.Z)(this,T),d=j.call(this,c),d.state={id:d.props.location.query.id,courseDetail:{},isDisabled:d.props.location.query.id},d.getExercise=(0,s.Z)(P().mark(function C(){var F,y,p;return P().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return F=d.state.id,y=d.props.location.query.topic_title,m.next=4,(0,t.Sp)(y,F);case 4:p=m.sent,p.error_code==200?d.setState({courseDetail:p.data}):D.default.error(p.msg);case 6:case"end":return m.stop()}},C)})),d.save=function(){var C=(0,s.Z)(P().mark(function F(y){var p,M,m,L,$,I,V;return P().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(p=d.state.courseDetail,p.title){f.next=5;break}D.default.warning("please input the course title"),f.next=21;break;case 5:if(p.content){f.next=9;break}D.default.warning("please input the course content"),f.next=21;break;case 9:if(M=d.props.location.query,m=M.topic_title,L=M.id,$=1,!L){f.next=17;break}return f.next=14,(0,t.tu)(L,m,y.title,p.content,$);case 14:I=f.sent,f.next=20;break;case 17:return f.next=19,(0,t.xH)(m,y.title,p.content,$);case 19:I=f.sent;case 20:I.error_code==200?(D.default.success("Save success"),V=I.data.id,d.props.history.push("/courseAdmin/courseDisplay?topic_title=".concat(m,"&id=").concat(V))):D.default.error("Save error! "+I.msg);case 21:case"end":return f.stop()}},F)}));return function(F){return C.apply(this,arguments)}}(),d}return(0,w.Z)(T,[{key:"componentDidMount",value:function(){this.props.location.query.id&&this.getExercise()}},{key:"render",value:function(){var d=this,C=this.state.courseDetail,F=this.props.location.query.topic_title;return(0,E.jsx)(i.ZP,{ghost:!0,onBack:function(){return d.props.history.go(-1)},header:{title:(0,E.jsx)(v,{level:2,children:C.id?"Edit Course":"Add Course"})},children:(0,E.jsx)(l.ZP,{children:(0,E.jsxs)(b.ZP,{submitter:{render:function(p,M){return(0,E.jsx)(a.Z,{children:M})},searchConfig:{submitText:"Submit"},resetButtonProps:{style:{display:"none"}}},onFinish:this.save,children:[(0,E.jsx)(B.Z,{width:"md",name:"title",label:"Course Title",placeholder:"input course title here",value:C.title,onChange:function(p){C.title=p.target.value,d.setState({courseDetail:C})}}),(0,E.jsx)(b.ZP.Item,{name:"content",label:"Course Content",value:C.content,children:(0,E.jsx)(n.CKEditor,{editor:u(),data:C.content,config:{toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","insertTable","mediaEmbed","undo","redo"],shouldNotGroupWhenFull:!1},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},ckfinder:{uploadUrl:"/server/V1/course/upload_course_img/".concat(F,"/")}},onChange:function(p,M){var m=d.state.courseDetail,L=M.getData();m.content=L,d.setState({courseDetail:m})},onError:function(p){var M=p.willEditorRestart;M&&d.editor.ui.view.toolbar.element.remove()}})})]})})})}}]),T}(g.Component)},11021:function(H,O,e){"use strict";e.d(O,{D0:function(){return w},wA:function(){return U},tu:function(){return Z},rq:function(){return S},xH:function(){return x},G$:function(){return W},Sp:function(){return P},A:function(){return g},BK:function(){return b},BW:function(){return B},EI:function(){return R}});var _=e(3182),D=e(94043),s=e.n(D),r=e(21010),w=function(){var u=(0,_.Z)(s().mark(function n(o){var t;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t="/server/V1/course/topicsByTeacher/?teacher_id=".concat(o),i.abrupt("return",(0,r.WY)(t));case 2:case"end":return i.stop()}},n)}));return function(o){return u.apply(this,arguments)}}(),U=function(){var u=(0,_.Z)(s().mark(function n(o,t){var l;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l="/server/V1/course/edit/",a.abrupt("return",(0,r.WY)(l,{method:"post",data:{request_entity:"Topic",content:{topic_id:o,topic_info:t}}}));case 2:case"end":return a.stop()}},n)}));return function(o,t){return u.apply(this,arguments)}}(),Z=function(){var u=(0,_.Z)(s().mark(function n(o,t,l,i,a){var E;return s().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return E="/server/V1/course/edit/",h.abrupt("return",(0,r.WY)(E,{method:"post",data:{request_entity:"Course",content:{id:o,related_topic:t,title:l,content:i,teacher_id:a}}}));case 2:case"end":return h.stop()}},n)}));return function(o,t,l,i,a){return u.apply(this,arguments)}}(),S=function(){var u=(0,_.Z)(s().mark(function n(o,t,l,i){var a;return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a="/server/V1/course/create/",v.abrupt("return",(0,r.WY)(a,{method:"post",data:{request_entity:"Topic",content:{topic_title:o,topic_content:t,topic_img:l,teacher_id:i}}}));case 2:case"end":return v.stop()}},n)}));return function(o,t,l,i){return u.apply(this,arguments)}}(),x=function(){var u=(0,_.Z)(s().mark(function n(o,t,l,i){var a;return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a="/server/V1/course/create/",v.abrupt("return",(0,r.WY)(a,{method:"post",data:{request_entity:"Course",content:{related_topic:o,title:t,content:l,teacher_id:i}}}));case 2:case"end":return v.stop()}},n)}));return function(o,t,l,i){return u.apply(this,arguments)}}(),W=function(){var u=(0,_.Z)(s().mark(function n(o){var t;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t="/server/V1/course/courses/".concat(o,"/"),i.abrupt("return",(0,r.WY)(t));case 2:case"end":return i.stop()}},n)}));return function(o){return u.apply(this,arguments)}}(),P=function(){var u=(0,_.Z)(s().mark(function n(o,t){var l;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l="/server/V1/course/courseDetail/".concat(o,"/").concat(t,"/"),a.abrupt("return",(0,r.WY)(l));case 2:case"end":return a.stop()}},n)}));return function(o,t){return u.apply(this,arguments)}}(),g=function(){var u=(0,_.Z)(s().mark(function n(o,t){var l;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l="/server/V1/course/delete/",a.abrupt("return",(0,r.WY)(l,{method:"post",data:{request_entity:"Course",related_topic:o,content:t}}));case 2:case"end":return a.stop()}},n)}));return function(o,t){return u.apply(this,arguments)}}(),b=function(){var u=(0,_.Z)(s().mark(function n(o){var t;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t="/server/V1/course/delete/",i.abrupt("return",(0,r.WY)(t,{method:"post",data:{request_entity:"Topic",content:o}}));case 2:case"end":return i.stop()}},n)}));return function(o){return u.apply(this,arguments)}}(),B=function(){var u=(0,_.Z)(s().mark(function n(o,t){var l;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l="/server/V1/course/sort/",a.abrupt("return",(0,r.WY)(l,{method:"post",data:{request_entity:"Course",related_topic:o,content:t}}));case 2:case"end":return a.stop()}},n)}));return function(o,t){return u.apply(this,arguments)}}(),R=function(){var u=(0,_.Z)(s().mark(function n(o,t){var l;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l="/server/V1/course/delete_img/",a.abrupt("return",(0,r.WY)(l,{method:"post",data:{request_entity:t,fname:o}}));case 2:case"end":return a.stop()}},n)}));return function(o,t){return u.apply(this,arguments)}}()}}]);
