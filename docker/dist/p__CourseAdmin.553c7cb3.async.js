(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[667],{13745:function(Y,w,e){"use strict";e.r(w),e.d(w,{default:function(){return N}});var D=e(62350),I=e(75443),c=e(57663),E=e(71577),x=e(86582),Z=e(34792),T=e(48086),b=e(3182),B=e(69610),L=e(54941),K=e(81306),R=e(72936),U=e(94043),g=e.n(U),_=e(67294),t=e(95357),r=e(8212),n=e(73171),s=e(50339),o=e(78009),i=e(39265),O=e(11021),h=e(90672),C=e(26743),F=e(37476),$=e(5966),V=e(49101),S=e(4631),H=e.n(S),a=e(85893),N=function(G){(0,K.Z)(A,G);var z=(0,R.Z)(A);function A(){var v;(0,B.Z)(this,A);for(var j=arguments.length,W=new Array(j),P=0;P<j;P++)W[P]=arguments[P];return v=z.call.apply(z,[this].concat(W)),v.state={topics:[]},v.getTopics=(0,b.Z)(g().mark(function p(){var d,u;return g().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=1,m.next=3,(0,O.D0)(d);case 3:u=m.sent,u.error_code==200&&v.setState({topics:u.data.map(function(f){var y=f.fields;return y.topic_id=f.pk,y})});case 5:case"end":return m.stop()}},p)})),v.addNewTopic=function(){var p=(0,b.Z)(g().mark(function d(u){var M,m,f;return g().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(console.log(u),M=1,!(!u.topic_content||!u.topic_title)){l.next=5;break}return T.default.error("please input the topic_title and the topic_content"),l.abrupt("return",!1);case 5:return l.next=7,(0,O.rq)(u.topic_title,u.topic_content,u.topic_img,M);case 7:if(m=l.sent,m.error_code!=200){l.next=15;break}return f={topic_id:m.id,topic_title:u.topic_title,topic_content:u.topic_content,topic_img:u.topic_img},v.setState({topics:[].concat((0,x.Z)(v.state.topics),[f])}),T.default.success("topic has been created successfully"),l.abrupt("return",!0);case 15:return T.default.error(m.msg),l.abrupt("return",!1);case 17:case"end":return l.stop()}},d)}));return function(d){return p.apply(this,arguments)}}(),v.confirm=function(){var p=(0,b.Z)(g().mark(function d(u){var M;return g().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log(u,222),f.next=3,(0,O.BK)(u);case 3:M=f.sent,M.error_code==200?(T.default.success("Delete success."),v.getTopics()):T.default.success("Fail to delete. Please try again later");case 5:case"end":return f.stop()}},d)}));return function(d){return p.apply(this,arguments)}}(),v}return(0,L.Z)(A,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){var j=this,W=function(p){var d=p.icon,u=p.text;return(0,a.jsxs)("span",{onClick:function(){console.log(d,u)},children:[_.createElement(d,{style:{marginRight:8}}),u]})};return(0,a.jsx)("div",{style:{background:"#F5F7FA"},children:(0,a.jsx)(o.ZP,{header:{title:"Course Management",ghost:!0,breadcrumb:{}},children:(0,a.jsx)(i.ZP,{children:(0,a.jsx)(s.Z,{toolBarRender:function(){return[(0,a.jsxs)(F.Z,{title:"Add a new topic",trigger:(0,a.jsxs)(E.Z,{type:"primary",children:[(0,a.jsx)(V.Z,{}),"NEW"]}),autoFocusFirstInput:!0,onFinish:function(d){return j.addNewTopic(d)},submitter:{searchConfig:{submitText:"submit",resetText:"cancel"}},children:[(0,a.jsx)($.Z,{width:"md",name:"topic_title",label:"Topic Title",placeholder:"please input a topic title"}),(0,a.jsx)(h.Z,{name:"topic_content",label:"topic description",placeholder:"please input topic description"}),(0,a.jsx)(C.Z,{name:"topic_img",label:"Upload",max:2,fieldProps:{name:"file",listType:"picture-card"},action:"/upload.do"})]})]},itemLayout:"vertical",rowKey:"id",headerTitle:"Topics",dataSource:this.state.topics,metas:{title:{dataIndex:"topic_title",render:function(p){return(0,a.jsx)("a",{href:"/courseAdmin/courseList?topic_title=".concat(p),style:{textDecoration:"none",color:"#333"},children:p})}},actions:{render:function(p,d){return[(0,a.jsx)("a",{href:"/courseAdmin/courseList?topic_title=".concat(d.topic_title),children:(0,a.jsx)(W,{icon:t.Z,text:"view"},"list-vertical-message")}),(0,a.jsxs)(F.Z,{title:"NEW",trigger:(0,a.jsx)("a",{children:(0,a.jsx)(W,{icon:r.Z,text:"edit"},"list-vertical-star-o")}),autoFocusFirstInput:!0,onFinish:function(){var u=(0,b.Z)(g().mark(function M(m){var f;return g().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!m.topic_content&&!m.topic_title)){l.next=6;break}return console.log(m.topic_content),T.default.info("Nothing changed"),l.abrupt("return",!0);case 6:return console.log(m,888),l.next=9,(0,O.wA)(d.topic_id,m);case 9:if(f=l.sent,f.error_code!=200){l.next=16;break}return j.getTopics(),T.default.success("topic infomation changed success"),l.abrupt("return",!0);case 16:return T.default.error(f.msg),l.abrupt("return",!1);case 18:case"end":return l.stop()}},M)}));return function(M){return u.apply(this,arguments)}}(),submitter:{searchConfig:{submitText:"submit",resetText:"cancel"}},children:[(0,a.jsx)($.Z,{width:"md",name:"topic_title",label:"Topic Title",placeholder:"please input a topic title",value:d.topic_title}),(0,a.jsx)(h.Z,{name:"topic_content",label:"topic description",placeholder:"please input topic description",value:d.topic_content}),(0,a.jsx)(C.Z,{name:"topic_img",label:"Upload",max:2,fieldProps:{name:"file",listType:"picture-card"},action:"/upload.do"})]}),(0,a.jsx)(I.Z,{title:"Are you sure to delete this topic? This action will also delets all courses attached to this topic",onConfirm:function(){return j.confirm(d.topic_id)},okText:"Yes",cancelText:"No",children:(0,a.jsx)("a",{children:(0,a.jsx)(W,{icon:n.Z,text:"delete"},"list-vertical-like-o")})})]}},extra:{dataIndex:"topic_img",render:function(p){return(0,a.jsx)("img",{width:272,alt:"logo",src:p.thumbUrl})}},content:{dataIndex:"topic_content",render:function(p){return(0,a.jsx)("div",{children:p})}}}})})})})}}]),A}(_.Component)},11021:function(Y,w,e){"use strict";e.d(w,{D0:function(){return x},wA:function(){return Z},tu:function(){return T},rq:function(){return b},xH:function(){return B},G$:function(){return L},Sp:function(){return K},A:function(){return R},BK:function(){return U},BW:function(){return g}});var D=e(3182),I=e(94043),c=e.n(I),E=e(21010),x=function(){var _=(0,D.Z)(c().mark(function t(r){var n;return c().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n="/server/V1/course/topicsByTeacher/?teacher_id=".concat(r),o.abrupt("return",(0,E.WY)(n));case 2:case"end":return o.stop()}},t)}));return function(r){return _.apply(this,arguments)}}(),Z=function(){var _=(0,D.Z)(c().mark(function t(r,n){var s;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s="/server/V1/course/edit/",i.abrupt("return",(0,E.WY)(s,{method:"post",data:{request_entity:"Topic",content:{topic_id:r,topic_info:n}}}));case 2:case"end":return i.stop()}},t)}));return function(r,n){return _.apply(this,arguments)}}(),T=function(){var _=(0,D.Z)(c().mark(function t(r,n,s,o,i){var O;return c().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return O="/server/V1/course/edit/",C.abrupt("return",(0,E.WY)(O,{method:"post",data:{request_entity:"Course",content:{id:r,related_topic:n,title:s,content:o,teacher_id:i}}}));case 2:case"end":return C.stop()}},t)}));return function(r,n,s,o,i){return _.apply(this,arguments)}}(),b=function(){var _=(0,D.Z)(c().mark(function t(r,n,s,o){var i;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return i="/server/V1/course/create/",h.abrupt("return",(0,E.WY)(i,{method:"post",data:{request_entity:"Topic",content:{topic_title:r,topic_content:n,topic_img:s,teacher_id:o}}}));case 2:case"end":return h.stop()}},t)}));return function(r,n,s,o){return _.apply(this,arguments)}}(),B=function(){var _=(0,D.Z)(c().mark(function t(r,n,s,o){var i;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return i="/server/V1/course/create/",h.abrupt("return",(0,E.WY)(i,{method:"post",data:{request_entity:"Course",content:{related_topic:r,title:n,content:s,teacher_id:o}}}));case 2:case"end":return h.stop()}},t)}));return function(r,n,s,o){return _.apply(this,arguments)}}(),L=function(){var _=(0,D.Z)(c().mark(function t(r){var n;return c().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n="/server/V1/course/courses/".concat(r,"/"),o.abrupt("return",(0,E.WY)(n));case 2:case"end":return o.stop()}},t)}));return function(r){return _.apply(this,arguments)}}(),K=function(){var _=(0,D.Z)(c().mark(function t(r,n){var s;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s="/server/V1/course/courseDetail/".concat(r,"/").concat(n,"/"),i.abrupt("return",(0,E.WY)(s));case 2:case"end":return i.stop()}},t)}));return function(r,n){return _.apply(this,arguments)}}(),R=function(){var _=(0,D.Z)(c().mark(function t(r,n){var s;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s="/server/V1/course/delete/",i.abrupt("return",(0,E.WY)(s,{method:"post",data:{request_entity:"Course",related_topic:r,content:n}}));case 2:case"end":return i.stop()}},t)}));return function(r,n){return _.apply(this,arguments)}}(),U=function(){var _=(0,D.Z)(c().mark(function t(r){var n;return c().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n="/server/V1/course/delete/",o.abrupt("return",(0,E.WY)(n,{method:"post",data:{request_entity:"Topic",content:r}}));case 2:case"end":return o.stop()}},t)}));return function(r){return _.apply(this,arguments)}}(),g=function(){var _=(0,D.Z)(c().mark(function t(r,n){var s;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s="/server/V1/course/sort/",i.abrupt("return",(0,E.WY)(s,{method:"post",data:{request_entity:"Course",related_topic:r,content:n}}));case 2:case"end":return i.stop()}},t)}));return function(r,n){return _.apply(this,arguments)}}()}}]);
