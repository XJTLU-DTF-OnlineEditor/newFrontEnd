(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[201],{2981:function(ve,J,e){"use strict";e.r(J),e.d(J,{default:function(){return ze}});var B=e(59250),k=e(13013),C=e(57663),w=e(71577),re=e(98858),z=e(4914),ne=e(30887),Q=e(14289),se=e(34792),G=e(48086),Y=e(3182),W=e(2824),ae=e(402),q=e(97272),_=e(94043),s=e.n(_),n=e(67294),a=e(86582),d=e(69610),m=e(54941),h=e(81306),u=e(72936),H=e(18106),A=e(52917),L=e(29656),Ge=e(4631),He=e(71707),Ue=e(48991),Je=e(20017),Qe=e(88657),Xe=e(89700),ke=e(35688),qe=e(9898),_e=e(82801),et=e(93411),tt=e(99762),rt=e(36629),nt=e(5321),st=e(7999),at=e(960),it=e(88386),lt=e(69109),he=e(69816),pe=e(25782),me=e(24616),ge=e(21444),ye=e(38296),ee=e(21010),xe=function(){var M=(0,Y.Z)(s().mark(function P(Z,r,o){var v;return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return v="/server/V1/editor/run/interactive/",c.abrupt("return",(0,ee.WY)(v,{method:"post",data:{id:Z,lang:r,filelist:o}}));case 2:case"end":return c.stop()}},P)}));return function(Z,r,o){return M.apply(this,arguments)}}(),ut=null,Se=function(){var M=(0,Y.Z)(s().mark(function P(Z){var r;return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r="/server/V1/editor/terminate/",v.abrupt("return",(0,ee.WY)(r,{method:"post",data:{id:Z}}));case 2:case"end":return v.stop()}},P)}));return function(Z){return M.apply(this,arguments)}}(),Ze=function(){var M=(0,Y.Z)(s().mark(function P(Z){var r;return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r="/server/V1/editor/pic/",v.abrupt("return",(0,ee.WY)(r,{method:"post",data:{path:Z}}));case 2:case"end":return v.stop()}},P)}));return function(Z){return M.apply(this,arguments)}}(),Ce=e(1798),b=e.n(Ce),je=e(17244),we=e(37476),be=e(5966),Ee=e(64317),t=e(85893),Re=A.Z.TabPane,ie=[{title:"main.py",content:"",key:"0",closable:!1,lang:"python",placeholder:"code goes here"},{title:"requirements.txt",content:"",key:"1",closable:!1,lang:"properties",placeholder:`To add dependencies of the program as the following format:
'''
matplotlib
python-dateutil>=2.7
cycler==0.10
six>=1.5
'''`}],Pe=function(M){(0,h.Z)(Z,M);var P=(0,u.Z)(Z);function Z(){var r;(0,d.Z)(this,Z);for(var o=arguments.length,v=new Array(o),S=0;S<o;S++)v[S]=arguments[S];return r=P.call.apply(P,[this].concat(v)),r.state={id:"",isFullScreen:!1,disable:!1,input:"",activeKey:ie[0].key,panes:ie,modalVisit:!1},r.rootRef=n.createRef(),r.ws=n.createRef(null),r.restFormRef=n.createRef(),r.fullScreen=function(){r.state.isFullScreen||r.rootRef.current.requestFullscreen()},r.exitFullScreen=function(){document.exitFullscreen()},r.handeleRun=function(){if(r.state.id)r.terminate();else{var c=(0,je.x0)().replace(/-/g,"");b().publish("id",{id:c}),r.setState({id:c})}},r.runcode=(0,Y.Z)(s().mark(function c(){var g,D,F,$,f,O;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return D=r.state,F=D.id,$=D.panes,f=D.input,O=$.map(function(E){return{title:E.title,content:E.content,id:E.key}}),i.next=4,xe(F,$[0].lang,O);case 4:g=i.sent,g.error_code!=200&&G.default.error(g.msg);case 6:case"end":return i.stop()}},c)})),r.terminate=(0,Y.Z)(s().mark(function c(){var g;return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return r.setState({disable:!0}),F.next=3,Se(r.state.id);case 3:g=F.sent,g.error_code!==200&&G.default.error("Something wrong happens. Please try again later"),b().publish("id",{id:""}),r.setState({id:""}),r.ws.current=0,setTimeout(function(){r.setState({disable:!1})},1e3);case 9:case"end":return F.stop()}},c)})),r.onChange=function(c){r.setState({activeKey:c})},r.onEdit=function(c,g){console.log(g,c),r[g](c)},r.add=function(){r.setState({modalVisit:!0})},r.remove=function(c){var g=r.state,D=g.panes,F=g.activeKey,$=F,f;D.forEach(function(y,i){y.key===c&&(f=i-1)});var O=D.filter(function(y){return y.key!==c});O.length&&$===c&&(f>=0?$=O[f].key:$=O[0].key),r.setState({panes:O,activeKey:$})},r}return(0,m.Z)(Z,[{key:"componentDidMount",value:function(){var o=this;console.log(this.state.panes),b().subscribe("editor",function(v,S){o.setState(S)}),b().subscribe("newFile",function(v,S){console.log(S),o.setState({panes:[].concat((0,a.Z)(o.state.panes),[{title:S.filename,content:S.content,key:String(o.state.panes.length-1),closable:!0,lang:"python"}])})}),b().subscribe("ws",function(v,S){S.ws!=o.ws.current&&(o.ws.current=S.ws,S.ws===1&&o.runcode())}),window.onresize=function(){document.fullscreenElement?o.setState({isFullScreen:!0}):o.setState({isFullScreen:!1})}}},{key:"render",value:function(){var o=this,v=this.state,S=v.id,c=v.disable,g=v.isFullScreen,D=v.modalVisit,F=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{ghost:!0,type:"primary",disabled:c,onClick:this.handeleRun,icon:S?(0,t.jsx)(he.Z,{}):(0,t.jsx)(pe.Z,{}),children:S?"Edit":"Run"}),(0,t.jsx)(w.Z,{icon:(0,t.jsx)(me.Z,{})}),g?(0,t.jsx)(w.Z,{icon:(0,t.jsx)(ge.Z,{}),onClick:this.exitFullScreen}):(0,t.jsx)(w.Z,{icon:(0,t.jsx)(ye.Z,{}),onClick:this.fullScreen})]}),$=this.state,f=$.panes,O=$.activeKey;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(we.Y,{title:"new file",visible:D,formRef:this.restFormRef,width:"500px",onVisibleChange:function(i){return o.setState({modalVisit:i})},submitter:{searchConfig:{submitText:"confirm",resetText:"cancel"},resetButtonProps:{onClick:function(){var i;(i=o.restFormRef.current)===null||i===void 0||i.resetFields(),o.setState({modalVisit:!1})}}},onFinish:function(){var y=(0,Y.Z)(s().mark(function i(E){var T,j,R;return s().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:j="".concat(f.length),R=(0,a.Z)(f),R.push({title:E.filename,content:"",key:j,lang:E.lang,closable:!0,placeholder:"code goes here"}),o.setState({panes:R,activeKey:j,modalVisit:!1}),(T=o.restFormRef.current)===null||T===void 0||T.resetFields();case 5:case"end":return x.stop()}},i)}));return function(i){return y.apply(this,arguments)}}(),children:[(0,t.jsx)(be.Z,{width:"md",name:"filename",label:"filename",placeholder:"please input the filename"}),(0,t.jsx)(Ee.Z,{name:"lang",label:"lang",valueEnum:{python:"python",java:"java",c:"c","c++":"c++",shell:"shell",properties:"properties",css:"css"},initialValue:this.state.panes[0].lang,width:"sm",placeholder:"Please select a programme language",rules:[{required:!0,message:"Please select a programme language!"}]})]}),(0,t.jsx)(A.Z,{type:"editable-card",onChange:this.onChange,activeKey:O,onEdit:this.onEdit,tabBarExtraContent:F,children:f.map(function(y){return(0,t.jsx)(Re,{tab:y.title,closable:y.closable,children:(0,t.jsx)("div",{ref:o.rootRef,children:(0,t.jsx)(L.fk,{className:"editor",value:y.content,options:{mode:y.lang,theme:"darcula",autofocus:!0,styleActiveLine:!0,lineNumbers:!0,smartIndent:!0,lineWrapping:!0,foldGutter:!0,placeholder:y.placeholder,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,autoCloseBrackets:!0,fullScreen:g,scrollbarStyle:"simple",cursorScrollMargin:5,extraKeys:{Ctrl:"autocomplete","Ctrl-S":function(E){E.codeSave(E)},"Ctrl-Z":function(E){E.undo()},F8:function(E){E.redo()}}},onBeforeChange:function(E,T,j){var R=f;R[parseInt(y.key)].content=j,o.setState({panes:(0,a.Z)(R)})}})})},y.key)})})]})}}]),Z}(n.Component),Te=e(6700),Fe=e(93488),$e=e(57551),ot=e(43358),le=e(34041),ct=e(31149),U=e(57895),Ve=le.Z.Option;function De(){var M=(0,n.useState)(""),P=(0,W.Z)(M,2),Z=P[0],r=P[1],o=(0,n.useState)(""),v=(0,W.Z)(o,2),S=v[0],c=v[1],g=(0,n.useState)(0),D=(0,W.Z)(g,2),F=D[0],$=D[1],f=(0,n.useRef)(null),O=(0,n.useRef)(null),y=(0,n.useRef)(""),i=(0,n.useRef)("");(0,n.useEffect)(function(){b().subscribe("id",function(x,p){r(p.id)})}),(0,n.useEffect)(function(){if(Z)c(""),b().publish("showRes",{error_code:0}),f.current=new WebSocket("ws://127.0.0.1:8000/V1/editor/".concat(Z,"/")),f.current.onopen=function(p){b().publish("ws",{ws:1})},f.current.onerror=function(p){f.current=null,b().publish("ws",{ws:null}),b().publish("id",{id:""}),G.default.error("Something wrong happens. Please try again later")},f.current.onclose=function(p){f.current=null,b().publish("ws",{ws:null}),b().publish("id",{id:""})},f.current.onmessage=function(p){var l=JSON.parse(p.data);if(l.message=="output"){var V=y.current+l.data;y.current=V,c(V),i.current=V}else l.message=="result"?(b().publish("showRes",{error_code:200,output:l.data}),b().publish("editor",{id:""}),r("")):l.message=="warning"?(b().publish("showRes",{error_code:410,output:l.data}),b().publish("editor",{id:""}),r("")):l.message=="error"?(b().publish("showRes",{error_code:500,output:l.data}),b().publish("editor",{id:""}),r("")):l.message=="pic"?b().publish("showPic",{url:l.data}):l.message=="file"&&b().publish("newFile",{filename:l.filename,content:l.data})};else{var x;(x=f.current)===null||x===void 0||x.close(),b().publish("ws",{ws:null}),f.current=null,y.current="",i.current="",$(0)}},[Z]);var E=function(p,l,V){(l.origin==="setValue"||typeof l.origin=="undefined")&&(p.focus(),p.execCommand("goDocEnd"),$(p.lastLine()))},T=function(p){p.getCursor().line<F&&p.execCommand("goDocEnd")},j=function(p,l){if(l==="Enter"){var V=y.current.replace(i.current,"");i.current=y.current,f.current.send(V)}},R=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(le.Z,{className:"selectMode",defaultValue:"Interactive",style:{width:180},children:(0,t.jsx)(Ve,{value:"Interactive",children:"Interactive Terminal"})})}),K={mode:"shell",readOnly:Z?!1:"nocursor",theme:"darcula",cursorScrollMargin:5,smartIndent:!1,scrollbarStyle:"simple",placeholder:"input goes here",autofocus:S,lineNumbers:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]};return(0,t.jsx)(U.ZP,{title:"Input / Output / Terminal",ghost:!0,extra:R,children:(0,t.jsx)(L.fk,{ref:O,className:"input",value:S,options:K,onBeforeChange:function(p,l,V){c(V),y.current=V},onCursorActivity:function(p){T(p)},onChange:function(p,l,V){E(p,l,V)},onFocus:function(p){p.scrollIntoView()},onKeyHandled:function(p,l){j(p,l)}})})}var dt=e(12968),Ie=e(62462),ft=e(17462),Me=e(76772),vt=e(49111),Oe=e(19650),ht=e(71194),ue=e(50146),pt=e(7359),oe=e(27279),mt=e(47673),We=e(4107),ce=We.Z.TextArea,de=oe.Z.Panel;function Ae(){var M="",P=(0,n.useState)(""),Z=(0,W.Z)(P,2),r=Z[0],o=Z[1],v=(0,n.useState)("info"),S=(0,W.Z)(v,2),c=S[0],g=S[1],D=(0,n.useState)(!1),F=(0,W.Z)(D,2),$=F[0],f=F[1],O=(0,n.useState)([]),y=(0,W.Z)(O,2),i=y[0],E=y[1],T=(0,n.useState)(!1),j=(0,W.Z)(T,2),R=j[0],K=j[1];(0,n.useEffect)(function(){PubSub.subscribe("showRes",function(V,I){var N=I.output;I.error_code==200?g("success"):I.error_code==410||I.error_code==408?g("warning"):I.error_code==500?g("error"):g("info"),o(N)}),PubSub.subscribe("showPic",function(V,I){var N={url:I.url,key:i.length};E([].concat((0,a.Z)(i),[N])),K(!0)})});var x=function(){f(!0)},p=function(){f(!1)},l=function(){var V=(0,Y.Z)(s().mark(function I(){var N;return s().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return K(!1),X.next=3,Ze(i[0].url);case 3:N=i,N.shift(),E((0,a.Z)(N)),i.length!==0&&K(!0);case 7:case"end":return X.stop()}},I)}));return function(){return V.apply(this,arguments)}}();return(0,t.jsxs)(oe.Z,{bordered:!1,ghost:!0,className:"reshint",defaultActiveKey:["2"],children:[(0,t.jsx)(de,{header:"Show hints",children:(0,t.jsx)("div",{children:M})},"1"),(0,t.jsxs)(de,{header:"Result",className:c,extra:(0,t.jsxs)(Oe.Z,{children:[(0,t.jsx)(w.Z,{size:"small",type:"ghost",onClick:x,children:"Detail"}),(0,t.jsx)(ue.Z,{visible:$,title:c,onCancel:p,width:800,footer:"",children:(0,t.jsx)(ce,{value:r||"Results will be shown here",autoSize:!0,bordered:!1,status:"error"})})]}),children:[(0,t.jsx)(Me.Z,{message:c,description:r?(0,t.jsx)(ce,{value:r,autoSize:!0,bordered:!1,status:"error"}):"Results will be shown here",type:c,showIcon:!0}),(0,t.jsx)(ue.Z,{visible:R,onCancel:l,footer:[(0,t.jsx)(w.Z,{onClick:l,children:"Close"},"close")],children:(0,t.jsx)(Ie.Z,{src:"/server/".concat(i.length>0?i[0].url:"")})})]},"2")]})}var Ke=e(78009),fe=e(11021),Be=e(72757),Ye=e(5234),Ne=e.n(Ye),Le=q.Z.Title;function ze(M){var P=this,Z=(0,n.useState)([]),r=(0,W.Z)(Z,2),o=r[0],v=r[1],S=(0,n.useState)(""),c=(0,W.Z)(S,2),g=c[0],D=c[1],F=(0,n.useState)({}),$=(0,W.Z)(F,2),f=$[0],O=$[1];(0,n.useEffect)(function(){y()},[]);var y=function(){var T=(0,Y.Z)(s().mark(function j(){var R,K,x,p,l;return s().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return R=M.match.params,K=R.id,x=R.related_topic,I.next=3,(0,fe.G$)(x);case 3:p=I.sent,l=p.course_list,l=l.map(function(N){var te=N.fields;return te.id=N.pk,te}),v(l),D(x),i(x,K);case 9:case"end":return I.stop()}},j)}));return function(){return T.apply(this,arguments)}}(),i=function(){var T=(0,Y.Z)(s().mark(function j(R,K){var x;return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return M.history.push("".concat(K)),l.next=3,(0,fe.Sp)(R,K);case 3:x=l.sent,x.error_code==200?O(x.data):G.default.error(x.msg);case 5:case"end":return l.stop()}},j)}));return function(R,K){return T.apply(this,arguments)}}(),E=(0,t.jsx)(Q.Z,{onClick:function(j){var R=j.key;return i(g,+R)},children:typeof o=="object"?o.map(function(T){return(0,t.jsx)(Q.Z.Item,{children:(0,t.jsx)("a",{target:"_blank",children:T.title})},T.id)}):[]});return(0,t.jsx)(Ke.ZP,{overlayClassName:"editorpage",ghost:!0,minHeight:"800px",header:{title:(0,t.jsx)(Le,{children:f.title}),breadcrumb:{}},content:(0,t.jsxs)(z.Z,{size:"middle",column:3,children:[(0,t.jsx)(z.Z.Item,{label:"related topic",children:g}),(0,t.jsx)(z.Z.Item,{label:"update date",children:f.update_date}),(0,t.jsx)(z.Z.Item,{label:"views",children:(0,t.jsx)("a",{children:f.views})})]}),extra:[(0,t.jsxs)(w.Z,{onClick:function(){return i(g,f.id-1)},disabled:f.id-1<1,children:[(0,t.jsx)(Te.Z,{}),"last exercise"]},"3"),(0,t.jsxs)(w.Z,{onClick:function(){return i(g,f.id+1)},disabled:f.id+1>o.length,children:["next exercise",(0,t.jsx)(Fe.Z,{})]},"2"),(0,t.jsx)(k.Z,{overlay:E,children:(0,t.jsx)("a",{className:"ant-dropdown-link",onClick:function(j){return j.preventDefault()},children:(0,t.jsx)(w.Z,{children:(0,t.jsx)($e.Z,{})})})},"1")],children:(0,t.jsxs)(U.ZP,{ghost:!0,gutter:15,style:{minHeight:1e3},className:"custom-dark",children:[(0,t.jsx)(U.ZP,{colSpan:8,style:{minHeight:600},className:"course",ghost:!0,children:(0,t.jsx)(Be.CKEditor,{editor:Ne(),disabled:!0,data:f.content,config:{toolbar:{items:[]}},onError:function(j){var R=j.willEditorRestart;R&&P.editor.ui.view.toolbar.element.remove()}})}),(0,t.jsxs)(U.ZP,{ghost:!0,colSpan:11,children:[(0,t.jsx)(Pe,{}),(0,t.jsx)(De,{})]}),(0,t.jsx)(U.ZP,{ghost:!0,colSpan:5,children:(0,t.jsx)(Ae,{})})]})})}},11021:function(ve,J,e){"use strict";e.d(J,{D0:function(){return re},wA:function(){return z},tu:function(){return ne},rq:function(){return Q},xH:function(){return se},G$:function(){return G},Sp:function(){return Y},A:function(){return W},BK:function(){return ae},BW:function(){return q},EI:function(){return _}});var B=e(3182),k=e(94043),C=e.n(k),w=e(21010),re=function(){var s=(0,B.Z)(C().mark(function n(a){var d;return C().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return d="/server/V1/course/topicsByTeacher/?teacher_id=".concat(a),h.abrupt("return",(0,w.WY)(d));case 2:case"end":return h.stop()}},n)}));return function(a){return s.apply(this,arguments)}}(),z=function(){var s=(0,B.Z)(C().mark(function n(a,d){var m;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/server/V1/course/edit/",u.abrupt("return",(0,w.WY)(m,{method:"post",data:{request_entity:"Topic",content:{topic_id:a,topic_info:d}}}));case 2:case"end":return u.stop()}},n)}));return function(a,d){return s.apply(this,arguments)}}(),ne=function(){var s=(0,B.Z)(C().mark(function n(a,d,m,h,u){var H;return C().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return H="/server/V1/course/edit/",L.abrupt("return",(0,w.WY)(H,{method:"post",data:{request_entity:"Course",content:{id:a,related_topic:d,title:m,content:h,teacher_id:u}}}));case 2:case"end":return L.stop()}},n)}));return function(a,d,m,h,u){return s.apply(this,arguments)}}(),Q=function(){var s=(0,B.Z)(C().mark(function n(a,d,m,h){var u;return C().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return u="/server/V1/course/create/",A.abrupt("return",(0,w.WY)(u,{method:"post",data:{request_entity:"Topic",content:{topic_title:a,topic_content:d,topic_img:m,teacher_id:h}}}));case 2:case"end":return A.stop()}},n)}));return function(a,d,m,h){return s.apply(this,arguments)}}(),se=function(){var s=(0,B.Z)(C().mark(function n(a,d,m,h){var u;return C().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return u="/server/V1/course/create/",A.abrupt("return",(0,w.WY)(u,{method:"post",data:{request_entity:"Course",content:{related_topic:a,title:d,content:m,teacher_id:h}}}));case 2:case"end":return A.stop()}},n)}));return function(a,d,m,h){return s.apply(this,arguments)}}(),G=function(){var s=(0,B.Z)(C().mark(function n(a){var d;return C().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return d="/server/V1/course/courses/".concat(a,"/"),h.abrupt("return",(0,w.WY)(d));case 2:case"end":return h.stop()}},n)}));return function(a){return s.apply(this,arguments)}}(),Y=function(){var s=(0,B.Z)(C().mark(function n(a,d){var m;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/server/V1/course/courseDetail/".concat(a,"/").concat(d,"/"),u.abrupt("return",(0,w.WY)(m));case 2:case"end":return u.stop()}},n)}));return function(a,d){return s.apply(this,arguments)}}(),W=function(){var s=(0,B.Z)(C().mark(function n(a,d){var m;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/server/V1/course/delete/",u.abrupt("return",(0,w.WY)(m,{method:"post",data:{request_entity:"Course",related_topic:a,content:d}}));case 2:case"end":return u.stop()}},n)}));return function(a,d){return s.apply(this,arguments)}}(),ae=function(){var s=(0,B.Z)(C().mark(function n(a){var d;return C().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return d="/server/V1/course/delete/",h.abrupt("return",(0,w.WY)(d,{method:"post",data:{request_entity:"Topic",content:a}}));case 2:case"end":return h.stop()}},n)}));return function(a){return s.apply(this,arguments)}}(),q=function(){var s=(0,B.Z)(C().mark(function n(a,d){var m;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/server/V1/course/sort/",u.abrupt("return",(0,w.WY)(m,{method:"post",data:{request_entity:"Course",related_topic:a,content:d}}));case 2:case"end":return u.stop()}},n)}));return function(a,d){return s.apply(this,arguments)}}(),_=function(){var s=(0,B.Z)(C().mark(function n(a,d){var m;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/server/V1/course/delete_img/",u.abrupt("return",(0,w.WY)(m,{method:"post",data:{request_entity:d,fname:a}}));case 2:case"end":return u.stop()}},n)}));return function(a,d){return s.apply(this,arguments)}}()}}]);
