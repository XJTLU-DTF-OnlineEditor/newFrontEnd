(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[201],{2981:function(he,_,e){"use strict";e.r(_),e.d(_,{default:function(){return Be}});var V=e(59250),ne=e(13013),p=e(57663),S=e(71577),ue=e(98858),H=e(4914),ie=e(30887),ee=e(54689),le=e(34792),U=e(48086),N=e(3182),O=e(2824),se=e(94043),F=e.n(se),v=e(67294),m=e(69610),n=e(54941),s=e(81306),a=e(72936),o=e(29656),c=e(4631),u=e(99762),Q=e(36629),Y=e(71707),X=e(48991),Ne=e(20017),ze=e(88657),Ge=e(89700),He=e(35688),Ue=e(9898),Je=e(82801),Qe=e(93411),Xe=e(5321),ke=e(960),qe=e(88386),_e=e(69109),pe=e(69816),me=e(25782),ge=e(24616),Se=e(21444),ye=e(38296),ae=e(21010),xe=function(){var M=(0,N.Z)(F().mark(function R(y,r,i){var d;return F().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d="/server/V1/editor/run/interactive/",g.abrupt("return",(0,ae.WY)(d,{method:"post",data:{id:y,lang:r,source:i}}));case 2:case"end":return g.stop()}},R)}));return function(y,r,i){return M.apply(this,arguments)}}(),Ze=function(){var M=(0,N.Z)(F().mark(function R(y,r,i,d){var h;return F().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return h="/server/V1/editor/run/split/",l.abrupt("return",(0,ae.WY)(h,{method:"post",data:{id:y,lang:r,source:i,input:d}}));case 2:case"end":return l.stop()}},R)}));return function(y,r,i,d){return M.apply(this,arguments)}}(),Ce=function(){var M=(0,N.Z)(F().mark(function R(y){var r;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r="/server/V1/editor/terminate/",d.abrupt("return",(0,ae.WY)(r,{method:"post",data:{id:y}}));case 2:case"end":return d.stop()}},R)}));return function(y){return M.apply(this,arguments)}}(),je=e(1798),w=e.n(je),J=e(39265),we=e(77596),t=e(85893),Ee=function(M){(0,s.Z)(y,M);var R=(0,a.Z)(y);function y(){var r;(0,m.Z)(this,y);for(var i=arguments.length,d=new Array(i),h=0;h<i;h++)d[h]=arguments[h];return r=R.call.apply(R,[this].concat(d)),r.state={id:"",isFullScreen:!1,source:"",disable:!1,input:"",inputType:"Interactive",lang:"python"},r.rootRef=v.createRef(),r.ws=v.createRef(null),r.fullScreen=function(){r.state.isFullScreen||r.rootRef.current.requestFullscreen()},r.exitFullScreen=function(){document.exitFullscreen()},r.handeleRun=function(){if(r.state.id)r.terminate();else{var g=(0,we.x0)().replace(/-/g,"");w().publish("id",{id:g}),r.setState({id:g})}},r.runcode=(0,N.Z)(F().mark(function g(){var l,E,T,P,x,C,L;return F().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(E=r.state,T=E.id,P=E.source,x=E.lang,C=E.inputType,L=E.input,C!="Interactive"){b.next=8;break}return console.log("Interactive"),b.next=5,xe(T,x,P);case 5:l=b.sent,b.next=13;break;case 8:if(C!="Split"){b.next=13;break}return console.log("Split"),b.next=12,Ze(T,x,P,L);case 12:l=b.sent;case 13:l.error_code!=200&&U.default.error(l.msg);case 14:case"end":return b.stop()}},g)})),r.terminate=(0,N.Z)(F().mark(function g(){var l;return F().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return r.setState({disable:!0}),T.next=3,Ce(r.state.id);case 3:l=T.sent,l.error_code!==200&&(console.log(l.error_code),U.default.error("Something wrong happens. Please try again later")),w().publish("id",{id:""}),r.setState({id:""}),r.ws.current=0,setTimeout(function(){r.setState({disable:!1})},1e3);case 9:case"end":return T.stop()}},g)})),r}return(0,n.Z)(y,[{key:"componentDidMount",value:function(){var i=this;w().subscribe("editor",function(d,h){i.setState(h)}),w().subscribe("ws",function(d,h){h.ws!=i.ws.current&&(i.ws.current=h.ws,h.ws===1&&i.runcode())}),window.onresize=function(){document.fullscreenElement?i.setState({isFullScreen:!0}):i.setState({isFullScreen:!1})}}},{key:"render",value:function(){var i=this,d=this.state,h=d.id,g=d.disable,l=d.isFullScreen,E=d.source,T=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{ghost:!0,type:"primary",disabled:g,onClick:this.handeleRun,icon:h?(0,t.jsx)(pe.Z,{}):(0,t.jsx)(me.Z,{}),children:h?"Edit":"Run"}),(0,t.jsx)(S.Z,{icon:(0,t.jsx)(ge.Z,{})}),l?(0,t.jsx)(S.Z,{icon:(0,t.jsx)(Se.Z,{}),onClick:this.exitFullScreen}):(0,t.jsx)(S.Z,{icon:(0,t.jsx)(ye.Z,{}),onClick:this.fullScreen})]}),P={mode:"python",theme:"darcula",autofocus:!0,styleActiveLine:!0,lineNumbers:!0,smartIndent:!0,lineWrapping:!0,foldGutter:!0,placeholder:"code goes here",gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,autoCloseBrackets:!0,fullScreen:l,scrollbarStyle:"simple",cursorScrollMargin:5,extraKeys:{Ctrl:"autocomplete","Ctrl-S":function(C){C.codeSave(C)},"Ctrl-Z":function(C){C.undo()},F8:function(C){C.redo()}}};return(0,t.jsx)(J.ZP,{title:"Source",ghost:!0,extra:T,children:(0,t.jsx)("div",{ref:this.rootRef,children:(0,t.jsx)(o.fk,{className:"editor",value:E,options:P,onBeforeChange:function(C,L,A){i.setState({source:A})}})})})}}]),y}(v.Component),Te=e(6700),be=e(93488),Re=e(57551),et=e(43358),oe=e(34041),ce=oe.Z.Option;function Ie(M){var R=(0,v.useState)(""),y=(0,O.Z)(R,2),r=y[0],i=y[1],d=(0,v.useState)(""),h=(0,O.Z)(d,2),g=h[0],l=h[1],E=(0,v.useState)("Interactive"),T=(0,O.Z)(E,2),P=T[0],x=T[1],C=(0,v.useState)(0),L=(0,O.Z)(C,2),A=L[0],b=L[1],j=(0,v.useState)("python"),I=(0,O.Z)(j,2),K=I[0],z=I[1],Z=(0,v.useRef)(null),k=(0,v.useRef)(null),D=(0,v.useRef)(""),q=(0,v.useRef)("");(0,v.useEffect)(function(){w().subscribe("id",function(W,f){i(f.id)})}),(0,v.useEffect)(function(){if(r)P=="Interactive"&&l(""),w().publish("showRes",{error_code:0}),Z.current=new WebSocket("ws://127.0.0.1:8000/V1/editor/".concat(r,"/")),Z.current.onopen=function(f){w().publish("ws",{ws:1})},Z.current.onerror=function(f){Z.current=null,w().publish("ws",{ws:null}),w().publish("id",{id:""}),U.default.error("Something wrong happens. Please try again later")},Z.current.onclose=function(f){Z.current=null,w().publish("ws",{ws:null}),w().publish("id",{id:""})},Z.current.onmessage=function(f){var $=JSON.parse(f.data);if($.message=="output"){var B=D.current+$.data;D.current=B,l(B),q.current=B}else $.message=="result"?(w().publish("showRes",{error_code:200,output:$.data}),w().publish("editor",{id:""}),i("")):$.message=="error"&&(w().publish("showRes",{error_code:500,output:"\u3010 "+$.data+" \u3011"}),w().publish("editor",{id:""}),i(""))};else{var W;(W=Z.current)===null||W===void 0||W.close(),w().publish("ws",{ws:null}),Z.current=null,D.current="",q.current="",b(0)}},[r]);var G=function(f,$,B){P==="Split"&&w().publish("editor",{input:B}),($.origin==="setValue"||typeof $.origin=="undefined")&&(f.focus(),f.execCommand("goDocEnd"),b(f.lastLine()))},te=function(f){f.getCursor().line<A&&f.execCommand("goDocEnd")},re=function(f,$){if($==="Enter"){var B=D.current.replace(q.current,"");q.current=D.current,Z.current.send(B)}},Ye=function(f){x(f),w().publish("editor",{inputType:f})},Ke=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(oe.Z,{className:"selectMode",defaultValue:"Interactive",style:{width:180},onSelect:Ye,children:[(0,t.jsx)(ce,{value:"Split",children:"Split input/output"}),(0,t.jsx)(ce,{value:"Interactive",children:"Interactive Terminal"})]})}),Le={readOnly:P==="Split"||r?!1:"nocursor",theme:"darcula",cursorScrollMargin:5,smartIndent:!1,scrollbarStyle:"simple",placeholder:"input goes here",autofocus:g,lineNumbers:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]};return(0,t.jsx)(J.ZP,{title:"Input / Output / Terminal",ghost:!0,extra:Ke,children:(0,t.jsx)(o.fk,{ref:k,className:"input",value:g,options:Le,onBeforeChange:function(f,$,B){l(B),D.current=B},onCursorActivity:function(f){te(f)},onChange:function(f,$,B){G(f,$,B)},onFocus:function(f){f.scrollIntoView()},onKeyHandled:function(f,$){P==="Interactive"&&re(f,$)}})})}var tt=e(17462),De=e(76772),rt=e(49111),Fe=e(19650),nt=e(71194),Pe=e(50146),st=e(7359),de=e(27279),at=e(47673),$e=e(4107),fe=$e.Z.TextArea;function Me(){var M=de.Z.Panel,R="",y=(0,v.useState)(""),r=(0,O.Z)(y,2),i=r[0],d=r[1],h=(0,v.useState)("info"),g=(0,O.Z)(h,2),l=g[0],E=g[1],T=(0,v.useState)(!1),P=(0,O.Z)(T,2),x=P[0],C=P[1];(0,v.useEffect)(function(){PubSub.subscribe("showRes",function(b,j){var I=j.output;j.error_code==200?E("success"):j.error_code==410||j.error_code==408?E("warning"):j.error_code==500?E("error"):E("info"),d(I),I&&C(!0)})});var L=function(){C(!0)},A=function(){C(!1)};return(0,t.jsxs)(de.Z,{bordered:!1,ghost:!0,className:"reshint",defaultActiveKey:["2"],children:[(0,t.jsx)(M,{header:"Show hints",children:(0,t.jsx)("div",{children:R})},"1"),(0,t.jsx)(M,{header:"Result",className:l,children:(0,t.jsx)(De.Z,{message:l,description:i?(0,t.jsx)(fe,{value:i,autoSize:!0,bordered:!1,status:"error"}):"Results will be shown here",type:l,action:(0,t.jsxs)(Fe.Z,{children:[(0,t.jsx)(S.Z,{size:"small",type:"ghost",onClick:L,children:"Detail"}),(0,t.jsx)(Pe.Z,{visible:x,title:l,onCancel:A,width:800,footer:[(0,t.jsx)(S.Z,{onClick:A,children:"Close"},"back")],children:(0,t.jsx)(fe,{value:i||"Results will be shown here",autoSize:!0,bordered:!1,status:"error"})})]}),showIcon:!0})},"2")]})}var Oe=e(78009),ve=e(11021),We=e(72757),Ve=e(5234),Ae=e.n(Ve);function Be(M){var R=this,y=(0,v.useState)([]),r=(0,O.Z)(y,2),i=r[0],d=r[1],h=(0,v.useState)(""),g=(0,O.Z)(h,2),l=g[0],E=g[1],T=(0,v.useState)({}),P=(0,O.Z)(T,2),x=P[0],C=P[1];(0,v.useEffect)(function(){L()},[]);var L=function(){var j=(0,N.Z)(F().mark(function I(){var K,z,Z,k,D;return F().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return K=M.match.params,z=K.id,Z=K.related_topic,G.next=3,(0,ve.G$)(Z);case 3:k=G.sent,D=k.course_list,D=D.map(function(te){var re=te.fields;return re.id=te.pk,re}),d(D),E(Z),A(Z,z);case 9:case"end":return G.stop()}},I)}));return function(){return j.apply(this,arguments)}}(),A=function(){var j=(0,N.Z)(F().mark(function I(K,z){var Z;return F().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return M.history.push("".concat(z)),D.next=3,(0,ve.Sp)(K,z);case 3:Z=D.sent,Z.error_code==200?C(Z.data):U.default.error(Z.msg);case 5:case"end":return D.stop()}},I)}));return function(K,z){return j.apply(this,arguments)}}(),b=(0,t.jsx)(ee.Z,{onClick:function(I){var K=I.key;return A(l,+K)},children:typeof i=="object"?i.map(function(j){return(0,t.jsx)(ee.Z.Item,{children:(0,t.jsx)("a",{target:"_blank",children:j.title})},j.id)}):[]});return(0,t.jsx)(Oe.ZP,{ghost:!0,header:{title:x.title,breadcrumb:{}},content:(0,t.jsxs)(H.Z,{size:"middle",column:3,children:[(0,t.jsx)(H.Z.Item,{label:"related topic",children:l}),(0,t.jsx)(H.Z.Item,{label:"update date",children:x.update_date}),(0,t.jsx)(H.Z.Item,{label:"views",children:(0,t.jsx)("a",{children:x.views})})]}),extra:[(0,t.jsxs)(S.Z,{onClick:function(){return A(l,x.id-1)},disabled:x.id-1<1,children:[(0,t.jsx)(Te.Z,{}),"last exercise"]},"3"),(0,t.jsxs)(S.Z,{onClick:function(){return A(l,x.id+1)},disabled:x.id+1>i.length,children:["next exercise",(0,t.jsx)(be.Z,{})]},"2"),(0,t.jsx)(ne.Z,{overlay:b,children:(0,t.jsx)("a",{className:"ant-dropdown-link",onClick:function(I){return I.preventDefault()},children:(0,t.jsx)(S.Z,{children:(0,t.jsx)(Re.Z,{})})})},"1")],children:(0,t.jsxs)(J.ZP,{ghost:!0,gutter:15,style:{height:500},children:[(0,t.jsx)(J.ZP,{colSpan:8,style:{minHeight:600,paddingTop:"20px"},className:"course",ghost:!0,children:(0,t.jsx)(We.CKEditor,{editor:Ae(),disabled:!0,data:x.content,config:{toolbar:{items:[]}},onError:function(I){var K=I.willEditorRestart;K&&R.editor.ui.view.toolbar.element.remove()}})}),(0,t.jsxs)(J.ZP,{ghost:!0,colSpan:11,children:[(0,t.jsx)(Ee,{}),(0,t.jsx)(Ie,{})]}),(0,t.jsx)(J.ZP,{ghost:!0,colSpan:5,children:(0,t.jsx)(Me,{})})]})})}},11021:function(he,_,e){"use strict";e.d(_,{D0:function(){return ue},wA:function(){return H},tu:function(){return ie},rq:function(){return ee},xH:function(){return le},G$:function(){return U},Sp:function(){return N},A:function(){return O},BK:function(){return se},BW:function(){return F},EI:function(){return v}});var V=e(3182),ne=e(94043),p=e.n(ne),S=e(21010),ue=function(){var m=(0,V.Z)(p().mark(function n(s){var a;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a="/server/V1/course/topicsByTeacher/?teacher_id=".concat(s),c.abrupt("return",(0,S.WY)(a));case 2:case"end":return c.stop()}},n)}));return function(s){return m.apply(this,arguments)}}(),H=function(){var m=(0,V.Z)(p().mark(function n(s,a){var o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o="/server/V1/course/edit/",u.abrupt("return",(0,S.WY)(o,{method:"post",data:{request_entity:"Topic",content:{topic_id:s,topic_info:a}}}));case 2:case"end":return u.stop()}},n)}));return function(s,a){return m.apply(this,arguments)}}(),ie=function(){var m=(0,V.Z)(p().mark(function n(s,a,o,c,u){var Q;return p().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Q="/server/V1/course/edit/",X.abrupt("return",(0,S.WY)(Q,{method:"post",data:{request_entity:"Course",content:{id:s,related_topic:a,title:o,content:c,teacher_id:u}}}));case 2:case"end":return X.stop()}},n)}));return function(s,a,o,c,u){return m.apply(this,arguments)}}(),ee=function(){var m=(0,V.Z)(p().mark(function n(s,a,o,c){var u;return p().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return u="/server/V1/course/create/",Y.abrupt("return",(0,S.WY)(u,{method:"post",data:{request_entity:"Topic",content:{topic_title:s,topic_content:a,topic_img:o,teacher_id:c}}}));case 2:case"end":return Y.stop()}},n)}));return function(s,a,o,c){return m.apply(this,arguments)}}(),le=function(){var m=(0,V.Z)(p().mark(function n(s,a,o,c){var u;return p().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return u="/server/V1/course/create/",Y.abrupt("return",(0,S.WY)(u,{method:"post",data:{request_entity:"Course",content:{related_topic:s,title:a,content:o,teacher_id:c}}}));case 2:case"end":return Y.stop()}},n)}));return function(s,a,o,c){return m.apply(this,arguments)}}(),U=function(){var m=(0,V.Z)(p().mark(function n(s){var a;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a="/server/V1/course/courses/".concat(s,"/"),c.abrupt("return",(0,S.WY)(a));case 2:case"end":return c.stop()}},n)}));return function(s){return m.apply(this,arguments)}}(),N=function(){var m=(0,V.Z)(p().mark(function n(s,a){var o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o="/server/V1/course/courseDetail/".concat(s,"/").concat(a,"/"),u.abrupt("return",(0,S.WY)(o));case 2:case"end":return u.stop()}},n)}));return function(s,a){return m.apply(this,arguments)}}(),O=function(){var m=(0,V.Z)(p().mark(function n(s,a){var o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o="/server/V1/course/delete/",u.abrupt("return",(0,S.WY)(o,{method:"post",data:{request_entity:"Course",related_topic:s,content:a}}));case 2:case"end":return u.stop()}},n)}));return function(s,a){return m.apply(this,arguments)}}(),se=function(){var m=(0,V.Z)(p().mark(function n(s){var a;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a="/server/V1/course/delete/",c.abrupt("return",(0,S.WY)(a,{method:"post",data:{request_entity:"Topic",content:s}}));case 2:case"end":return c.stop()}},n)}));return function(s){return m.apply(this,arguments)}}(),F=function(){var m=(0,V.Z)(p().mark(function n(s,a){var o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o="/server/V1/course/sort/",u.abrupt("return",(0,S.WY)(o,{method:"post",data:{request_entity:"Course",related_topic:s,content:a}}));case 2:case"end":return u.stop()}},n)}));return function(s,a){return m.apply(this,arguments)}}(),v=function(){var m=(0,V.Z)(p().mark(function n(s,a){var o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o="/server/V1/course/delete_img/",u.abrupt("return",(0,S.WY)(o,{method:"post",data:{request_entity:a,fname:s}}));case 2:case"end":return u.stop()}},n)}));return function(s,a){return m.apply(this,arguments)}}()}}]);
